/*******************************************************************************
* File          : GPIODebounceTools.hpp
*
* Description   : GPIO debounce tools
*
* Project       :
*
* Author        : Simon Gilbert
*
* Created on    : 19 Feb 2020
*
*******************************************************************************/
/* Define to prevent recursive inclusion -------------------------------------*/
#ifndef GPIODEBOUNCETOOLS_HPP
#define GPIODEBOUNCETOOLS_HPP

/*******************************************************************************
INCLUDES
*******************************************************************************/

#include "CircularBuffer.hpp"

/*******************************************************************************
DEFINITIONS
*******************************************************************************/

/*******************************************************************************
TYPES
*******************************************************************************/

/*******************************************************************************
GLOBAL VARIABLES
*******************************************************************************/

/*******************************************************************************
NAMESPACE
*******************************************************************************/

class CGPIOData
{
public:
    CGPIOData(uint32_t debounceWindow);
    ~CGPIOData(void);
    void update(uint32_t newState);
    uint32_t debounce(void);
    bool isPressed(uint32_t button);
    bool anyPressed(void);

private:
    uint32_t m_debounceWindow;
    volatile uint32_t m_stateArray[m_debounceWindow];
    CCBBuffer<uint32_t> m_stateCB;
    uint32_t m_state;

};

/*******************************************************************************
FUNCTION PROTOTYPES
*******************************************************************************/

/*******************************************************************************
INLINE FUNCTIONS
*******************************************************************************/

#endif /* GPIODEBOUNCETOOLS_HPP */
